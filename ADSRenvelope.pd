#N canvas 74 75 1063 421 12;
#N canvas 84 85 966 651 ADSR 0;
#X obj 105 111 inlet;
#X obj 435 151 inlet;
#X text 101 86 trigger;
#X obj 105 139 sel 0;
#X obj 244 155 t b;
#X obj 166 264 f \$1;
#X obj 166 289 pack 0 \$2;
#X obj 492 151 inlet;
#X obj 438 281 del \$2;
#X obj 458 429 line~;
#X obj 462 304 f \$4;
#X obj 501 379 pack 0 \$3;
#X obj 554 151 inlet;
#X obj 616 151 inlet;
#X obj 689 150 inlet;
#X msg 105 170 stop;
#X obj 612 306 pack 0 \$5;
#X text 435 129 level;
#X obj 501 355 * \$1;
#X obj 458 454 outlet~;
#X text 102 378 and pack with;
#X text 103 398 attack time;
#X text 31 126 if zero;
#X text 32 143 release;
#X text 12 160 and cancel;
#X text 43 177 decay;
#X text 284 272 on attack \, set a;
#X text 278 305 recall sustain value;
#X text 315 378 pack with decay time;
#X text 605 332 on release ramp;
#X text 606 349 back to zero;
#X obj 462 329 * 0.01;
#X text 47 567 Objects such as "f" and "pack" can be given dollar sign
arguments to initialize their contents from adsr's creation arguments.
Inlets are supplied to change them on the fly.;
#X text 13 2 ADSR ENVELOPE;
#X text 488 129 attack;
#X text 555 128 decay;
#X text 609 129 sustain;
#X text 686 129 release;
#X text 202 71 attack;
#X obj 204 92 moses;
#X obj 194 122 t b b;
#X msg 128 290 0;
#X text 20 273 optionally;
#X text 10 291 bash to zero;
#X text 25 246 ATTACK:;
#X text 47 477 When you send this patch a positive trigger it schedules
a line~ to do an attack and decay \, and if zero \, it starts the release
ramp.;
#X text 255 89 test for negative trigger;
#X text 253 113 if so \, zero;
#X text 254 129 the output;
#X text 278 165 in any case;
#X text 303 355 multiply by peak level;
#X text 280 286 delay for sustain;
#X text 276 328 convert from percent;
#X text 155 340 ... then;
#X text 103 359 recall peak level;
#X text 439 113 peak;
#X text 281 149 ... do this;
#X text 47 529 Negative triggers cause the output to jump to zero and
then attack (instead of attacking from the current location).;
#X text 208 1 Arguments: level \, attack time \, decay time \, sustain
level \, release time. A \, D \, and R are in msec and S is in percent.
This patch is used as an abstraction in various examples.;
#X connect 0 0 3 0;
#X connect 1 0 5 1;
#X connect 1 0 18 1;
#X connect 3 0 15 0;
#X connect 3 0 16 0;
#X connect 3 1 39 0;
#X connect 4 0 5 0;
#X connect 4 0 8 0;
#X connect 5 0 6 0;
#X connect 6 0 9 0;
#X connect 7 0 6 1;
#X connect 7 0 8 1;
#X connect 8 0 10 0;
#X connect 9 0 19 0;
#X connect 10 0 31 0;
#X connect 11 0 9 0;
#X connect 12 0 11 1;
#X connect 13 0 10 1;
#X connect 14 0 16 1;
#X connect 15 0 8 0;
#X connect 16 0 9 0;
#X connect 18 0 11 0;
#X connect 31 0 18 0;
#X connect 39 0 40 0;
#X connect 39 1 4 0;
#X connect 40 0 4 0;
#X connect 40 1 41 0;
#X connect 41 0 9 0;
#X restore 214 222 pd ADSR;
#X floatatom 163 121 5 1 1000 0 attack: - - 0;
#X floatatom 163 144 5 1 1000 0 decay: - - 0;
#X floatatom 163 167 5 1 100 0 sustain: - - 0;
#X floatatom 163 190 5 1 3000 0 release: - - 0;
#X msg 223 190 1;
#X obj 223 166 loadbang;
#X obj 214 282 outlet~;
#X obj 214 56 inlet velocityIn;
#X obj 214 254 *~;
#X obj 246 130 route 0;
#X obj 292 166 * 0.00787402;
#X obj 214 95 t f f;
#X obj 334 56 inlet attack;
#X obj 426 56 inlet decay;
#X obj 511 56 inlet sustain;
#X obj 610 56 inlet release;
#X obj 334 83 clip 1 1000;
#X obj 426 83 clip 1 1000;
#X obj 511 83 clip 1 100;
#X obj 610 83 clip 1 3000;
#X msg 68 38 15 9 21 276;
#X obj 68 62 unpack f f f f;
#X obj 68 7 loadbang;
#X text 446 163 Inlets:;
#X text 446 181 1 number (0-127) \, velocity in from midi-input;
#X text 446 198 2 number (1-1000) \, attack;
#X text 446 215 3 number (1-1000) \, decay;
#X text 446 232 4 number (1-100) \, sustain;
#X text 446 249 5 number (1-3000) \, release;
#X text 446 285 Outlets:;
#X text 446 302 1 signal \, ADSR-envelope out;
#X connect 0 0 9 0;
#X connect 1 0 0 2;
#X connect 2 0 0 3;
#X connect 3 0 0 4;
#X connect 4 0 0 5;
#X connect 5 0 0 1;
#X connect 6 0 5 0;
#X connect 8 0 12 0;
#X connect 9 0 7 0;
#X connect 10 1 11 0;
#X connect 11 0 9 1;
#X connect 12 0 0 0;
#X connect 12 1 10 0;
#X connect 13 0 17 0;
#X connect 14 0 18 0;
#X connect 15 0 19 0;
#X connect 16 0 20 0;
#X connect 17 0 1 0;
#X connect 18 0 2 0;
#X connect 19 0 3 0;
#X connect 20 0 4 0;
#X connect 21 0 22 0;
#X connect 22 0 1 0;
#X connect 22 1 2 0;
#X connect 22 2 3 0;
#X connect 22 3 4 0;
#X connect 23 0 21 0;
#X coords 0 -1 1 1 102 110 1 100 100;
